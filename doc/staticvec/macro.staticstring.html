<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `staticstring` macro in crate `staticvec`."><meta name="keywords" content="rust, rustlang, rust-lang, staticstring"><title>staticvec::staticstring - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="shortcut icon" href="../favicon.ico"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc macro"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../staticvec/index.html'><div class='logo-container'><img src='../rust-logo.png' alt='logo'></div></a><div class="sidebar-elems"><p class='location'><a href='index.html'>staticvec</a></p><script>window.sidebarCurrent = {name: 'staticstring', ty: 'macro', relpath: ''};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"></div><a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../src/staticvec/macros.rs.html#98-117' title='goto source code'>[src]</a></span><span class='in-band'>Macro <a href='index.html'>staticvec</a>::<wbr><a class="macro" href=''>staticstring</a></span></h1><div class="docblock type-decl hidden-by-usual-hider"><div class="example-wrap"><pre class="rust macro">
<span class="macro">macro_rules</span><span class="macro">!</span> <span class="ident">staticstring</span> {
    (<span class="macro-nonterminal">$</span><span class="macro-nonterminal">val</span>:<span class="ident">expr</span>) <span class="op">=&gt;</span> { ... };
    (<span class="macro-nonterminal">$</span><span class="macro-nonterminal">val</span>:<span class="ident">expr</span>, <span class="macro-nonterminal">$</span><span class="macro-nonterminal">n</span>:<span class="ident">expr</span>) <span class="op">=&gt;</span> { ... };
}</pre></div>
</div><div class='docblock'><p>Creates a new [<code>StaticString</code>] from an <code>&amp;str</code> literal. This macro can be used in const contexts,
in keeping with the other ones in this crate.</p>
<p>The <code>staticstring!</code> macro comes in two forms: one that solely takes an <code>&amp;str</code> literal, where the
resulting [<code>StaticString</code>] will have a total capacity and initial length exactly equal to the
number of bytes in the literal, and one that takes an additional integral constant which is then
used to specify the constant-generic capacity independently from the length of the input string.</p>
<p>Implementing it this way allows the macro to be more flexible than would otherwise be possible due
to the required level of type inference being beyond what the compiler is (currently at least)
capable of.</p>
<p>Example usage:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">staticvec</span>::{<span class="ident">staticstring</span>, <span class="ident">StaticString</span>};

<span class="comment">// Usage at runtime, creating a `StaticString` with both a length and capacity of 10:</span>
<span class="kw">let</span> <span class="ident">s1</span> <span class="op">=</span> <span class="macro">staticstring</span><span class="macro">!</span>(<span class="string">&quot;ABCDEFGHIJ&quot;</span>);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">s1</span>, <span class="string">&quot;ABCDEFGHIJ&quot;</span>);

<span class="comment">// Usage at runtime, creating a `StaticString` with a length of 10 but a capacity of 20:</span>
<span class="kw">let</span> <span class="ident">s2</span> <span class="op">=</span> <span class="macro">staticstring</span><span class="macro">!</span>(<span class="string">&quot;ABCDEFGHIJ&quot;</span>, <span class="number">20</span>);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">s2</span>, <span class="string">&quot;ABCDEFGHIJ&quot;</span>);

<span class="comment">// Usage at compile time, creating a `StaticString` with both a length and capacity of 10:</span>
<span class="kw">const</span> <span class="ident">S3</span>: <span class="ident">StaticString</span><span class="op">&lt;</span><span class="number">10</span><span class="op">&gt;</span> <span class="op">=</span> <span class="macro">staticstring</span><span class="macro">!</span>(<span class="string">&quot;ABCDEFGHIJ&quot;</span>);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">S3</span>, <span class="string">&quot;ABCDEFGHIJ&quot;</span>);

<span class="comment">// Usage at compile time, creating a `StaticString` with a length of 18 but a capacity of 36,</span>
<span class="comment">// keeping in mind that length is measured in bytes and not characters of course:</span>
<span class="kw">const</span> <span class="ident">S4</span>: <span class="ident">StaticString</span><span class="op">&lt;</span><span class="number">36</span><span class="op">&gt;</span> <span class="op">=</span> <span class="macro">staticstring</span><span class="macro">!</span>(<span class="string">&quot;BCðŸ¤”BCðŸ¤”BCðŸ¤”&quot;</span>, <span class="number">36</span>);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">S4</span>, <span class="string">&quot;BCðŸ¤”BCðŸ¤”BCðŸ¤”&quot;</span>);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">S4</span>.<span class="ident">len</span>(), <span class="number">18</span>);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">S4</span>.<span class="ident">capacity</span>(), <span class="number">36</span>);

<span class="comment">// Differing length and capacity in the context of compile-time initialization is more useful</span>
<span class="comment">// with `static mut` variables than it is `const` or regular `static` variables, obviously. For</span>
<span class="comment">// example:</span>
<span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">S5</span>: <span class="ident">StaticString</span><span class="op">&lt;</span><span class="number">8</span><span class="op">&gt;</span> <span class="op">=</span> <span class="macro">staticstring</span><span class="macro">!</span>(<span class="string">&quot;ABCD&quot;</span>, <span class="number">8</span>);
<span class="kw">unsafe</span> {
  <span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">S5</span>, <span class="string">&quot;ABCD&quot;</span>);
  <span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">S5</span>.<span class="ident">len</span>(), <span class="number">4</span>);
  <span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">S5</span>.<span class="ident">capacity</span>(), <span class="number">8</span>);
  <span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">S5</span>.<span class="ident">remaining_capacity</span>(), <span class="number">4</span>);
  <span class="ident">S5</span>.<span class="ident">push_str</span>(<span class="string">&quot;EFGH&quot;</span>);
  <span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">S5</span>, <span class="string">&quot;ABCDEFGH&quot;</span>);
  <span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">S5</span>.<span class="ident">len</span>(), <span class="number">8</span>);
  <span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">S5</span>.<span class="ident">remaining_capacity</span>(), <span class="number">0</span>);
}</pre></div>
<p>Note that attempting to explicitly provide a capacity that is less than the number of bytes
in the input string will fail a <em>compile-time</em> static assertion in both const and runtime
contexts.</p>
<p>For example, this would give a compile-time error:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="comment">// const S5: StaticString&lt;1&gt; = staticstring!(&quot;ABCDEFG&quot;, 1);</span></pre></div>
<p>As would the following:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="comment">// let s6 = staticstring!(&quot;ðŸ¤”ðŸ¤”ðŸ¤”ðŸ¤”ðŸ¤”ðŸ¤”&quot;, 0);</span></pre></div>
</div></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../";window.currentCrate = "staticvec";</script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>